<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pinko-新鲜型瓶装咸鱼</title>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="lib/normalize-5.0.0.min.css">
    <link rel='stylesheet' href='lib/swiper.min.css'>
    <link rel="stylesheet" href="./style.css">

</head>
<body>
<!-- partial:index.partial.html -->
<div class="blog-slider">

    <div class="blog-slider__wrp swiper-wrapper">
        <div class="blog-slider__item swiper-slide">
            <div class="blog-slider__img">

                <img class="avatar-img" src="assets/avatar.jpg" alt="avatar">
            </div>
            <div class="blog-slider__content">
                <div class="blog-slider__title" style="margin-bottom: 40px">这里是新鲜型瓶装咸鱼的渔村小站！</div>
                <div class="blog-slider__title" style="margin-bottom: 40px">站点开发：@子月月_</div>
                <div class="blog-slider__title" style="margin-bottom: 40px">
                    项目开源地址：
                    <a href="https://github.com/MisakaNA/Pinko" target="_blank" style="font-weight: normal; font-size: medium">MisakaNA@Github</a>
                </div>
                <div class="blog-slider__title" >
                    技术参考：
                    <a href="https://codepen.io/JavaScriptJunkie/pen/WgRBxw" target="_blank" style="font-weight: normal; font-size: medium">Responsive Blog Card Slider</a>
                </div>
            </div>
        </div>

        <div class="blog-slider__item swiper-slide">
            <div class="blog-slider__img">
                <img class="avatar-img" src="assets/avatar.jpg" alt="avatar">
            </div>
            <div class="blog-slider__content">
                <span class="blog-slider__code" id="fans">“画小孩的概念神”</span>
                <div class="quote-box">
                    <p>
                        画画好累，但还是喜欢画可爱小女孩。
                    </p>
                    <p style="text-align: right;">——瓶装咸鱼</p>
                </div>
                <div class="blog-slider__text">关注瓶装咸鱼喵，关注瓶装咸鱼谢谢喵ヽ(≧∀≦)ﾉ</div>
                <!--<a href="bilibili://space.bilibili.com/7785531" class="blog-slider__button" target="_blank" onclick="openBili(event)">B站主页</a>-->
                <a href="https://space.bilibili.com/7785531" class="blog-slider__button" target="_blank">B站主页</a>
            </div>
        </div>

        <div class="blog-slider__item swiper-slide">

            <div class="blog-slider__img">

                <img class="avatar-img" src="assets/live_avatar.jpg" alt="live_avatar">
            </div>
            <div class="blog-slider__content">
                <span class="blog-slider__code">“mole”</span>
                <div class="blog-slider__title">随性直播，关注不迷路</div>
                <a href="https://live.bilibili.com/288831" class="blog-slider__button" target="_blank">直播间</a>
            </div>
        </div>

        <div class="blog-slider__item swiper-slide">

            <div class="blog-slider__img">
                <div class="sample-slider">
                    <div class="sample-slides">
                        <img src="assets/sample6.jpg" alt="last" class="clone"> <!-- 克隆最后一张放最前面 -->
                        <img src="assets/sample1.jpg" alt="sample1">
                        <img src="assets/sample2.jpg" alt="sample2">
                        <img src="assets/sample3.jpg" alt="sample3">
                        <img src="assets/sample4.jpg" alt="sample4">
                        <img src="assets/sample5.jpg" alt="sample5">
                        <img src="assets/sample6.jpg" alt="sample6">
                        <img src="assets/sample1.jpg" alt="first" class="clone"> <!-- 克隆第一张放最后面 -->
                    </div>
                    <button class="prev">&#10094;</button>
                    <button class="next">&#10095;</button>
                    <div class="dots"></div>
                </div>
                <img class="avatar-img" src="assets/live_avatar.jpg" alt="live_avatar">
            </div>
            <div class="blog-slider__content">
                <span class="blog-slider__code">“老师，稿子画好了吗？但是…我家小孩不是这个人设”</span>
                <div class="blog-slider__title">约稿传送门</div>
                <div class="blog-slider__text">
                    B站工房
                    <a href="https://b23.tv/yfDRa7f" target="_blank"><img class="order-sites-icon" src="assets/bili.ico" alt="工房"></a>
                </div>
                <div class="blog-slider__text">
                    米画师
                    <a href="https://www.mihuashi.com/profiles/4329541?role=painter&utm_source=direct&utm_campaign=userpage&utm_medium=share&utm_content=ordinary" target="_blank">
                        <img class="order-sites-icon" src="assets/mihuashi.ico" alt="米画师" >
                    </a>
                </div>
                <div class="blog-slider__text">
                    画加
                    <a href="https://huajia.163.com/main/profile/08nqxj4r" target="_blank"><img class="order-sites-icon" src="assets/huajia.ico" alt="画加"></a>
                </div>
                <div class="blog-slider__text">
                    Pixiv
                    <a href="https://www.pixiv.net/users/16305685" target="_blank"><img class="order-sites-icon" src="assets/pixiv.ico" alt="Pixiv"></a>
                </div>
            </div>
        </div>
        <div class="blog-slider__item swiper-slide">

            <div class="blog-slider__img">

                <img class="avatar-img" src="assets/group_qr.png" alt="group_qr">
            </div>
            <div class="blog-slider__content">
                <span class="blog-slider__code">“别见证，会让群死的毫无意义，不如死于多发色图。”</span>
                <div class="blog-slider__title">
                    <img src="assets/group_title.png" alt="group_title" class="group_title">
                </div>
                <a href="https://qm.qq.com/q/7eUEOgySDC" class="blog-slider__button" target="_blank">加入群聊</a>
            </div>
        </div>


    </div>

    <div class="blog-slider__pagination"></div>
</div>
<!-- partial -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.3.5/js/swiper.min.js'></script>
<script src="./script.js"></script>
<script>
    const slides = document.querySelector(".sample-slides");
    const images = document.querySelectorAll(".sample-slides img");
    const total = images.length;
    let slideWidth = 500;

    let index = 1; // 初始位置在真正的第一张
    let autoPlayInterval;

    // 初始化指示器
    const dotsContainer = document.querySelector(".dots");
    for (let i = 0; i < total - 2; i++) {
        let dot = document.createElement("div");
        dot.classList.add("dot");
        if (i === 0) dot.classList.add("active");
        dot.addEventListener("click", () => goToSlide(i + 1));
        dotsContainer.appendChild(dot);
    }
    const dots = document.querySelectorAll(".dot");

    // 设置初始位置
    slides.style.transform = `translateX(${-index * slideWidth}px)`;

    function updateDots() {
        dots.forEach(dot => dot.classList.remove("active"));
        dots[index - 1].classList.add("active");
    }

    function showSlide(n) {
        slides.style.transition = "transform 0.5s ease-in-out";
        index = n;
        slides.style.transform = `translateX(${-index * slideWidth}px)`;
        console.log(`translateX(${-index * slideWidth}px)`)
        slides.addEventListener("transitionend", function resetPosition() {
            if (index === total - 1) {
                slides.style.transition = "none";
                index = 1;
                slides.style.transform = `translateX(${-index * slideWidth}px)`;
            } else if (index === 0) {
                slides.style.transition = "none";
                index = total - 2;
                slides.style.transform = `translateX(${-index * slideWidth}px)`;
            }
            updateDots();
            slides.removeEventListener("transitionend", resetPosition);
        });
    }

    function goToSlide(n) {
        clearInterval(autoPlayInterval);
        showSlide(n);
        startAutoPlay();
    }

    document.querySelector(".prev").addEventListener("click", () => goToSlide(index - 1));
    document.querySelector(".next").addEventListener("click", () => goToSlide(index + 1));

    // 自动轮播
    function startAutoPlay() {
        autoPlayInterval = setInterval(() => {
            showSlide(index + 1);
        }, 3000);
    }

    function updateSlideWidth() {
        if(window.innerWidth < 1150 && window.innerWidth > 768) {
            console.log(window.innerWidth)
            slideWidth = 300
        } else if (window.innerWidth < 768 && window.innerWidth > 576) {
            slideWidth = 500
        } else if (window.innerWidth < 576 && window.innerWidth > 450) {
            slideWidth = 400
        } else if (window.innerWidth < 450) {
            slideWidth = 340
        } else {
            slideWidth = 500
        }
    }

    updateSlideWidth()
    startAutoPlay();
    window.addEventListener("resize", updateSlideWidth);
</script>
    <script>
        function openBili(event) {
            event.preventDefault(); // 防止默认跳转
            const appUrl = "bilibili://space/7785531";
            const webUrl = "https://space.bilibili.com/7785531"; // 备用网页版

            window.location.href = appUrl;

            setTimeout(() => {
                window.location.href = webUrl;
            }, 2000); // 2 秒后跳转网页，防止 App 未安装时无反应
        }
    </script>
</body>
</html>
